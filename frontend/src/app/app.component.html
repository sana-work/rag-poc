<div class="chat-container">
    <div class="header">
        <h1>Informational Assistant</h1>
        <div class="status-indicator">
            {{ isLoading ? 'Generating...' : 'Ready' }}
        </div>
    </div>

    <div class="messages-list">
        <div *ngFor="let msg of messages" class="message" [ngClass]="msg.role">
            <div class="message-content">
                <div class="role-label">{{ msg.role | titlecase }}</div>
                <div class="text" [innerHTML]="msg.content | slice:0:msg.content.length"></div>
                <!-- Simple text binding, use markdown parser if needed -->
            </div>

            <div *ngIf="msg.citations && msg.citations.length > 0" class="citations">
                <h4>Sources:</h4>
                <ul>
                    <li *ngFor="let cite of msg.citations">
                        <span class="cite-title">{{ cite.title }}</span>
                        <span class="cite-score">(Score: {{ cite.score | number:'1.2-2' }})</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="input-area">
        <input type="text" [(ngModel)]="inputMessage" (keyup.enter)="sendMessage()" [disabled]="isLoading"
            placeholder="Ask a question...">
        <button (click)="sendMessage()" [disabled]="isLoading || !inputMessage.trim()">
            Send
        </button>
    </div>
</div>